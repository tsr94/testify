<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Testify | Your Placement Test Companion</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
    }
    .modal-container {
      position: relative;
    }
    .modal-close-btn {
      position: absolute;
      top: 10px;
      right: 12px;
      font-size: 1.5rem;
      cursor: pointer;
      color: #6b7280;
      transition: color 0.2s;
    }
    .modal-close-btn:hover {
      color: #000;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- Navbar -->
  <nav class="flex justify-between items-center px-6 md:px-16 py-4 bg-white shadow-sm fixed w-full top-0 z-10">
    <div class="text-2xl font-bold text-blue-600">
      <a href="/">Testify</a>
    </div>
    <div class="hidden md:flex space-x-6 items-center">
      <a href="#tests" class="hover:text-blue-600 transition">Available Tests</a>
      <a href="#features" class="hover:text-blue-600 transition">Features</a>
      <button onclick="openModal('loginModal')" class="px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-600 hover:text-white transition">Sign In</button>
      <button onclick="openModal('registerModal')" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">Sign Up</button>
    </div>
    <button class="md:hidden text-blue-600 focus:outline-none" id="menuBtn">
      ☰
    </button>
  </nav>

  <!-- Mobile Menu -->
  <div id="mobileMenu" class="hidden flex flex-col space-y-2 bg-white shadow-md p-4 mt-16 md:hidden">
    <a href="#tests" class="hover:text-blue-600 transition">Available Tests</a>
    <a href="#features" class="hover:text-blue-600 transition">Features</a>
    <button onclick="openModal('loginModal')" class="px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-600 hover:text-white transition">Sign In</button>
    <button onclick="openModal('registerModal')" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">Sign Up</button>
  </div>

  <!-- Hero Section -->
  <section class="flex flex-col md:flex-row items-center justify-between pt-28 pb-20 px-6 md:px-16 bg-gradient-to-r from-blue-50 via-white to-blue-50">
    <div class="max-w-xl space-y-6 text-center md:text-left">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-800">Prepare for Placements with Confidence</h1>
      <p class="text-lg text-gray-600">Practice curated aptitude, coding, and technical tests to ace your next interview.</p>
      <div class="flex flex-col sm:flex-row gap-4">
        <button class="px-6 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition" th:onclick="|window.location='/start-test'|">Take a Test</button>
        <button onclick="openModal('registerModal')" class="px-6 py-3 border border-gray-400 text-gray-700 rounded-lg hover:bg-gray-100 transition">Create a Test</button>
      </div>
    </div>
    <img src="https://illustrations.popsy.co/gray/work-from-home.svg" alt="Placement Illustration" class="mt-10 md:mt-0 w-80 md:w-[28rem]">
  </section>

  <!-- Features Section -->
  <section id="features" class="py-16 px-6 md:px-16 bg-white">
    <h2 class="text-3xl font-bold text-center mb-10">Why Choose Testify?</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="p-6 bg-blue-50 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold mb-2 text-blue-700">Timed Tests</h3>
        <p class="text-gray-600">Simulate real exam conditions with time-bound tests to improve speed and accuracy.</p>
      </div>
      <div class="p-6 bg-blue-50 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold mb-2 text-blue-700">Detailed Analytics</h3>
        <p class="text-gray-600">Get insights into your performance and focus on areas that need improvement.</p>
      </div>
      <div class="p-6 bg-blue-50 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold mb-2 text-blue-700">Placement-Oriented Questions</h3>
        <p class="text-gray-600">Practice curated questions from previous placement papers of top companies.</p>
      </div>
    </div>
  </section>

  <!-- Available Tests -->
  <section id="tests" class="py-16 px-6 md:px-16 bg-gray-50">
    <h2 class="text-3xl font-bold text-center mb-10">Available Tests</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- Dynamic Test Cards -->
        <div th:each="test : ${publishedTests}" class="bg-white rounded-2xl shadow hover:shadow-lg p-6 transition">
            <h3 class="text-xl font-semibold text-gray-800 mb-2" th:text="${test.testName}">Test Name</h3>
            <p class="text-gray-600 mb-4" th:text="${test.instructions}">Test description goes here.</p>
            <p class="text-sm text-gray-500 mb-4">
                <span th:text="${test.numberOfQuestions} + ' Questions'">30 Questions</span> • 
                <span th:text="${test.durationInMinutes} + ' mins'">30 mins</span>
            </p>
             <a th:href="@{/start-test(slug=${test.slug})}" 
               class="inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                Take Test
            </a>
        </div>
        
        <!-- Fallback if no tests are published -->
        <div th:if="${#lists.isEmpty(publishedTests)}" class="col-span-full text-center py-8">
            <p class="text-gray-500 text-lg">No tests available yet. Check back soon!</p>
        </div>
    </div>
</section>

  <!-- Footer -->
  <footer class="bg-white py-6 border-t text-center">
    <p class="text-gray-600">&copy; 2025 Testify. All Rights Reserved.</p>
    <div class="flex justify-center space-x-4 mt-2 text-blue-600">
      <a href="#" class="hover:underline">LinkedIn</a>
      <a href="#" class="hover:underline">Twitter</a>
      <a href="#" class="hover:underline">Instagram</a>
    </div>
  </footer>

  <!-- Login Modal -->
  <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-20" onclick="backdropClick(event, 'loginModal')">
    <div class="bg-white rounded-lg shadow-lg p-4 w-full max-w-sm modal-container" onclick="event.stopPropagation()">
      <span onclick="closeModal('loginModal')" class="modal-close-btn">&times;</span>
      <h3 class="text-xl font-bold mb-4">Admin Login</h3>
      <form th:action="@{/login}" method="post">
        <label class="block mb-2">Username</label>
        <input type="text" name="username" class="w-full border rounded-lg px-3 py-2 mb-3" required>
        <label class="block mb-2">Password</label>
        <input type="password" name="password" class="w-full border rounded-lg px-3 py-2 mb-3" required>
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">Login</button>
      </form>
      <p class="text-sm mt-3 text-center">Don't have an account?
        <a href="#" class="text-blue-600 hover:underline" onclick="switchModal('loginModal', 'registerModal')">Sign Up</a>
      </p>
    </div>
  </div>

  <!-- Register Modal -->
  <div id="registerModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-20" onclick="backdropClick(event, 'registerModal')">
    <div class="bg-white rounded-lg shadow-lg p-4 w-full max-w-sm modal-container" onclick="event.stopPropagation()">
      <span onclick="closeModal('registerModal')" class="modal-close-btn">&times;</span>
      <h3 class="text-xl font-bold mb-4">Admin Registration</h3>
      <form th:action="@{/admin/register}" method="post">
        <label class="block mb-2">Username</label>
        <input type="text" name="username" class="w-full border rounded-lg px-3 py-2 mb-3" required>
        <label class="block mb-2">Password</label>
        <input type="password" name="password" class="w-full border rounded-lg px-3 py-2 mb-3" required>
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">Register</button>
      </form>
      <p class="text-sm mt-3 text-center">Already have an account?
        <a href="#" class="text-blue-600 hover:underline" onclick="switchModal('registerModal', 'loginModal')">Login</a>
      </p>
    </div>
  </div>

  <!-- Simple JS for Mobile Menu -->
  <script>
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    function openModal(id) {
      document.getElementById(id).classList.remove('hidden');
    }
    function closeModal(id) {
      document.getElementById(id).classList.add('hidden');
    }
    function switchModal(closeId, openId) {
      closeModal(closeId);
      openModal(openId);
    }
    function backdropClick(event, modalId) {
      if (event.target.id === modalId) {
        closeModal(modalId);
      }
    }
  </script>

</body>
</html>